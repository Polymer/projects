<!--
/*
 * Copyright 2012 The Toolkitchen Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<element name="pi-accounts">
  <link rel="stylesheet" href="css/pi-accounts.css" />
  <link rel="components" href="pi-accounts-model.html"/>
  <link rel="components" href="../../../toolkit/src/g-icon-button.html"/>
  <template>
    <div class="header item">Topics</div>
    <template iterate="topics">
      <div class="item">
        <span class="label">{{title}}</span>
        <g-icon-button src="images/close.svg" on-click="removeTopic"></g-icon-button>
      </div>
    </template>
    <div class="item">
      Name: <input id="name" />
      Url: <input id="url" />
      <g-icon-button src="../images/add.svg" on-click="addTopic"></g-icon-button>
    </div>
    <pi-accounts-model id="accounts"></pi-accounts-model>
  </template>
  <script>
    this.component({
      publish: {
        topics: ''
      },
      ready: function() {
        this.topics = this.$.accounts.topics;
      },
      addTopic: function() {
        var n = this.$.name.value;
        var u = this.$.url.value;
        if (n && u) {
          this.$.accounts.addTopic({name: n, url: u})
          this.$.name.value = '';
          this.$.url.value = '';
        }
      },
      removeTopic: function(e) {
        this.$.accounts.removeTopic(e.currentTarget.model);
      }
    });
  </script>
</element>
