<!--
Copyright 2013 The Toolkitchen Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<script src="reflection.js"></script>

<element name="tk-inspector" attributes="element">
  <template>
    <style>
      @host {
        * {
          border: 1px solid silver;
        }
      }
      #header {
        background-color: #E0E0E0;
        border-bottom: 1px solid silver;
        padding-top: 4px;
        height: 44px;
        /*line-height: 60px;*/
      }
      #interior {
        position: absolute;
        top: 62px;
        right: 0;
        bottom: 0;
        left: 0;
        padding: 8px;
        overflow-x: hidden;
        overflow-y: auto;
      }
      g-icon-button {
        vertical-align: middle;
      }
    </style>
    <div id="header">
      <g-icon-button src="assets/ic_chevron_left_darkreg.png" on-click="selectParentElement"></g-icon-button>
      <b>{{name}}</b>
      <g-icon-button src="assets/ic_delete_darkreg.png" on-click="deleteElement" style="float: right"></g-icon-button>
    </div>
    <div id="interior">
      <template repeat="{{properties}}">
        <tk-property-inspector property="{{}}"></tk-property-inspector>
      </template>
      <!--<tk-style-inspector element="{{element}}"></tk-style-inspector>-->
    </div>
    <tk-meta id="meta"></tk-meta>
  </template>
  <script>
    Toolkit.register(this, {
      element: null,
      properties: null,
      name: '',
      elementChanged: function() {
        // meta-data attached here
        if (this.element) {
          this.element.meta = this.$.meta.byId(this.element.localName);
          this.properties = Reflection.properties(this.element);
          this.name = this.element && this.element.localName || '';
        } else {
          this.properties = [];
          this.name = '';
        }
      },
      deleteElement: function() {
        this.send('delete-element');
      },
      selectParentElement: function() {
        this.send('parent-element');
      }
    });
  </script>
</element>

<element name="tk-style-inspector" attributes="element">
  <template>
    <template repeat="{{properties}}">
      <tk-property-editor property="{{}}"></tk-property-editor>
    </template>
    <tk-meta id="meta">
      <property name="backgroundColor" kind="color"></property>
      <property name="opacity" kind="range" min="0" max="1" step="0.1" defaultvalue="1"></property>
      <property name="border"></property>
      <property name="width"></property>
      <property name="height"></property>
      <property name="test" kind="tk-compound-editor"></property>
    </tk-meta>
  </template>
  <script>
    Toolkit.register(this, {
      properties: null,
      elementChanged: function() {
        this.properties = Reflection.styles(this.element, this.$.meta.properties);
      }
    });
  </script>
</element>