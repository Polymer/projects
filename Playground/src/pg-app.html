<!--
/*
 * Copyright 2013 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->

<link rel="import" href="pg-view.html">

<polymer-element name="pg-app">
  <template>
    <link rel="stylesheet" href="../../../polymer-elements/polymer-flex-layout/polymer-flex-layout.css">
    <link rel="stylesheet" href="css/pg-app.css">
    <polymer-ui-sidebar-menu id="menu" label="Playground" selectedModel="{{selectedElement}}">
      <polymer-ui-icon logo src="images/toolkit.svg" size="32"></polymer-ui-icon>
      <template repeat="{{elements}}">
        <polymer-ui-menu-item label="{{label}}" src="images/code.png">
          <template repeat="{{subElements}}">
            <polymer-ui-menu-item label="{{label}}"></polymer-ui-menu-item>
          </template>
        </polymer-ui-menu-item>
      </template>
    </polymer-ui-sidebar-menu>
    <pg-view class="flexbox column" flex hideTitle meta="{{selectedElement}}" responsive></pg-view>
    <polymer-meta list="{{elements}}"></polymer-meta>
  </template>
  <script>
    Polymer('pg-app', {
      selectedElement: null,
      ready: function() {
        this.classList.add('flexbox');
        this.asyncMethod(function() {
          this.$.menu.selected = 0;
        });
      },
      selectedElementChanged: function() {
        var s = this.selectedElement;
        s.subElements = Array.prototype.slice.call(
            s.querySelectorAll('polymer-meta'));
      }
    });
  </script>
</polymer-element>